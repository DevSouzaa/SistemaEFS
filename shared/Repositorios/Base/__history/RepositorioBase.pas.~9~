unit RepositorioBase;

interface

uses
  FireDAC.Comp.Client, System.SysUtils, Conexao;

type
  TBaseRepository = class(TInterfacedObject)
  protected
    FConnection: TFDConnection;
  public
    constructor Create;
    destructor Destroy; override;
  end;

implementation

{ TBaseRepository }

constructor TBaseRepository.Create;
var
  LConexao: TConnection;
begin
  inherited Create;
  FConnection := TFDConnection.Create(nil);
  LConexao := TConnection.Create(nil);
  try
    LConexao.GetConfigConnection(FConnection);
    FConnection.Connected := True; // Conecta ao banco de dados
  finally
    LConexao.Free;
  end;
end;

destructor TBaseRepository.Destroy;
begin
  FConnection.Free;
  inherited;
end;

end.

